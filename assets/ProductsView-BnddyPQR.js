import{_ as f,o as n,c as l,a as t,n as r,F as u,r as m,t as a,b as w,d as p,e as k,f as y}from"./index-ruo9uTZf.js";const j={data(){return{}},props:["paginationObj"],watch:{paginationObj(){}},methods:{},created(){},mounted(){}},M={class:"pagination justify-content-center"};function v(e,s,i,d,o,_){return n(),l("nav",null,[t("ul",M,[t("li",{class:r(["page-item",{disabled:!i.paginationObj.has_pre}])},[t("a",{class:r(["page-link",{"text-dark":!i.paginationObj.has_pre}])},"Previous",2)],2),(n(!0),l(u,null,m(i.paginationObj.total_pages,(x,c)=>(n(),l("li",{class:r(["page-item",{active:i.paginationObj.current_page}]),key:"key"+c},[t("a",{class:r(["page-link",{"text-dark":i.paginationObj.current_page}])},a(c+1),3)],2))),128)),t("li",{class:r(["page-item",{disabled:!i.paginationObj.has_next}])},[t("a",{class:r(["page-link",{"text-dark":!i.paginationObj.has_next}]),href:"#"},"Next",2)],2)])])}const $=f(j,[["render",v]]),g="https://ec-course-api.hexschool.io/",b="bftsai",S={data(){return{products:[],paginationObj:{},itemSelect:{}}},components:{pagination:$},methods:{async getProducts(e){try{this.$emit("emit-toggleLoading");const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=s;const i=(await this.axios.get(`${g}v2/api/${b}/admin/products`,e)).data;this.products=i.products,this.paginationObj=i.pagination,this.$emit("emit-toggleLoading");const d={icon:"success",title:"已取得產品資料",timer:1500};this.$swal(d)}catch(s){console.log(s),this.$emit("emit-toggleLoading");const i={icon:"error",title:s.response.data.message};this.$swal(i)}},checkProduct(e){this.itemSelect=JSON.parse(JSON.stringify(e))},async postProduct(){try{const e={data:{title:"杯子蛋糕",category:"蛋糕",origin_price:100,price:50,unit:"個",description:"呈現經典的美味及口感。",content:"尺寸：2寸",is_enabled:0,imageUrl:"https://images.unsplash.com/photo-1563729784474-d77dbb933a9e?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Y2FrZXxlbnwwfHwwfHx8MA%3D%3D",imagesUrl:["https://plus.unsplash.com/premium_photo-1678310877551-396c3953c79e?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8Y3VwJTIwY2FrZXxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1586985290301-8db40143d525?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8Y3VwJTIwY2FrZXxlbnwwfHwwfHx8MA%3D%3D","https://images.unsplash.com/photo-1613452707901-21b3fd7f7e5b?w=800&auto=format&fit=crop&q=60&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8Y3VwJTIwY2FrZXxlbnwwfHwwfHx8MA%3D%3D"]}},s=await this.axios.post(`${g}v2/api/${b}/admin/product`,e);console.log(s)}catch(e){console.log(e)}},async checkLogin(){try{this.$emit("emit-toggleLoading");const e=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=e;const s=(await this.axios.post(`${g}v2/api/user/check`)).data;s.success&&(this.$emit("emit-toggleLogin",s.success),this.getProducts(1)),this.$emit("emit-toggleLoading")}catch(e){this.$emit("emit-toggleLogin",e.response.data.success);const s={icon:"error",title:e.response.data.message,timer:1500};this.$swal(s),this.$emit("emit-toggleLoading"),e.response.data.success||this.$router.push("login")}}},created(){this.$emit("emit-login"),this.checkLogin()}},O={class:"container"},D={class:"row"},H={class:"col-lg-6"},L=t("h1",null,"Products List",-1),Y={class:"table table-hover"},A=t("thead",null,[t("tr",{class:"text-center"},[t("th",{scope:"col"},"產品名稱"),t("th",{scope:"col"},"原價"),t("th",{scope:"col"},"售價"),t("th",{scope:"col"},"是否啟用"),t("th",{scope:"col"},"查看細節")])],-1),F=["onClick"],P={key:0,class:"col-lg-6"},C=t("h2",null,"Product",-1),V={class:"card border-primary mb-3"},Z=["src","alt"],z={class:"card-body"},B={class:"card-title"},N={class:"badge text-bg-primary ms-3"},T={class:"card-text"},J={class:"card-text"},U={class:"card-text"},X={class:"line-through text-light"},q={class:"d-flex mb-3"},W=["src","alt"];function I(e,s,i,d,o,_){const x=y("pagination");return n(),l("div",O,[t("div",D,[t("div",H,[L,t("table",Y,[A,t("tbody",null,[(n(!0),l(u,null,m(o.products,c=>(n(),l("tr",{key:c.title,class:"text-center"},[t("td",null,a(c.title),1),t("td",null,a(c.origin_price),1),t("td",null,a(c.price),1),t("td",{class:r({"text-light":!c.is_enabled})},a(c.is_enabled?"啟用":"未啟用"),3),t("td",null,[t("button",{type:"button",class:"btn btn-primary w-100",onClick:h=>_.checkProduct(c)},"查看細節",8,F)])]))),128))])]),w(x,{"pagination-obj":o.paginationObj},null,8,["pagination-obj"])]),o.itemSelect.id?(n(),l("div",P,[C,t("div",V,[t("img",{src:o.itemSelect.imageUrl,class:"card-img-top object-fit-contain",alt:o.itemSelect.title,height:"400"},null,8,Z),t("div",z,[t("h5",B,[p(a(o.itemSelect.title),1),t("span",N,a(o.itemSelect.category),1)]),t("p",T,"商品內容："+a(o.itemSelect.content),1),t("p",J,"商品描述："+a(o.itemSelect.description),1),t("p",U,[p(a(o.itemSelect.price)+" ",1),t("span",X,a(o.itemSelect.origin_price),1),p("元 / 個")])])]),t("div",q,[(n(!0),l(u,null,m(o.itemSelect.imagesUrl,(c,h)=>(n(),l("img",{src:c,alt:"小圖"+h,key:"小圖"+h,height:"200",class:"me-3"},null,8,W))),128))])])):k("",!0)])])}const G=f(S,[["render",I]]);export{G as default};
